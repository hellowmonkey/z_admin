!function(t,a){function i(a){return r(a)?(d=a,h=s(location.hash),void t.loadJs(z.libsPath+"arttmpl.min",n)):void t.alert("请先设置分类")}function n(){t(a).resize(),t("body").on("click","#tagList > li",function(){var a=t(this).data("src"),i=s(a),n=i[0];t("#tagLeft > .nav-list").hide(),t('#tagLeft > .nav-list[data-id="'+n+'"]').show(),t("#tagTop .z-nav-item").removeClass(active),t('#tagTop .z-nav-item[data-id="'+n+'"]').addClass(active),t("#tagLeft .z-nav-item:not(.z-action-tree)").removeClass(active);var e=t('#tagLeft a.toLink[href="'+a+'"]'),o=e.parent(),c=o.parent();o.addClass(active),c.hasClass("z-nav-child")&&!c.parent().hasClass(active)&&c.parent().click()}),t("body").on("click","a.toLink",function(a){a.stopPropagation();var i=t(this);o(i.attr("href"))}),t("body").on("click","#tagLeft .z-action-tree",function(){t(this).find(".z-icon").html(t(this).hasClass(active)?"&#xe6be;":"&#xe61b;")}),t(".menuBtn").on("click",function(){t(this).hasClass(active)?c(0,200):c(200,200),t(this).toggleClass(active)}),t(".offsetBtn").on("mousedown",function(){v=!0,t(".menuBtn").addClass(active)}),t(a).on("mouseup",function(){v=!1}),t(a).on("mousemove",function(t){if(v){t.stopPropagation(),t.preventDefault();var a=t.clientX;a>f/3&&(a=f/3),120>a&&(a=120),c(a)}}),t("#tagTop").html(template("tmp-tagTop",{items:d})),t("#tagTop .z-nav-item").on("click",function(a){a.stopPropagation();var i=t(this),n=i.data("id"),e=d[n].childs,o='#tagLeft > .nav-list[data-id="'+n+'"]';if(!r(e))return void t.alert("请先设置子分类");if(!i.hasClass(active)){t(o).length||t("#tagLeft").append(template("tmp-tagLeft",{items:e,id:n}));var s=t(o),c=h[1]?s.children(".z-nav-item:eq("+h[1]+")").find(h[2]?".z-nav-item:eq("+h[2]+") > a.toLink:first":".z-nav-item.default:first > a.toLink:first"):s.find(".z-nav-item.default:first > a.toLink:first");c.length||(c=s.find(".z-nav-item:not(.z-action-tree):first > a.toLink:first")),c.click()}});var i=h[0]?t("#tagTop > .z-nav-item").eq(h[0]):t("#tagTop > .z-nav-item.default:first");i.length||(i=t("#tagTop > .z-nav-item:first")),i.click()}function e(){t(".loadingBox").fadeOut(300,function(){t(".loadingBox").remove()})}function o(a){var i=d,n=s(a),o='#tagList > li[data-src="'+a+'"]';t.each(n,function(t,a){i=i[a].childs?i[a].childs:i[a]}),n=i.href,n&&(t(o).length||(t("#tagList").append('<li data-src="'+a+'">'+i.text+' <span class="z-tab-close">×</span></li>'),t("#tagContent").append('<div class="z-tab-item"><iframe src="'+n+'" width="100%" height="100%" frameborder="0"></iframe></div>'),t("#tagContent").find('iframe[src="'+n+'"]').on("load",e)),t(o).click())}function s(t){return t.replace(/^\#{1}/,"").split("/")}function c(a,i){var n=i?"animate":"css";t(".container")[n]({marginLeft:a+"px"},i),t(".nav-fixed")[n]({width:a+"px"},i)}function r(a){return"array"===t.type(a)&&a.length}var l,f,d,v=!1,h=[];active="z-active",t(a).on("resize",function(){l=window.innerHeight,f=window.innerWidth,t(".container .z-tab-content").height(l-90)}),a.admin={init:i}}(jQuery,window);